# 댓글 목록을 가져오는 기능
1. 링크추가
- /post/detail.html에 fetch를 이용한 함수를 선언
  - url : /api/v1/posts/게시글번호/comments
  - method : get
- 선언한 함수를 호출

2. 컨트롤러 메서드 추가
- url : /api/v1/posts/게시글번호/comments
- 화면 : 없음
  => 댓글 목록을 전달해야 하는데 임시로 null을 전달

3. 화면 추가

4. 컨트롤러
- 화면에서 보낸 게시글 번호를 가져옴
- 서비스에게 게시글 번호를 주면서 댓글 목록 가져오라고 요청
- 가져온 댓글 목록을 화면에 전달

5. 서비스
- 다오에게 게시글 번호를 주면서 댓글 목록을 가져오라고 요청
- 가져온 댓글 목록을 반환

6. 다오/매포
- 게시글 번호를 이용하여 댓글 목록을 가져오는 쿼리 작성
  - 삭제되지 않을 댓글만 가져옴
  - 정렬은 co_ori_num을 기준으로 내림차순 후, co_num을 기준으로 오
름차순

7. 화면
- 서버에서 보낸 댓글 목록을 가져와서 화면에 출력

#
1. 링크추가
- form태그를 submit하면 동작하는 함수를 추가
- 함수에 form태그가 전송하지 못하도록 막는 작업
- 추가한 함수에서 fetch를 이용하여 비동기 통신으로 서버에 전송
  - url : /api/vi/posts/게시글번호/comments
  - method : post

2. 컨트롤러메서드 추가
- url : /api/vi/posts/게시글번호/comments
- method : post
- 화면으로 보낼 값은 문자열 "test"

3. 화면
- 입력한 댓글을 가져와서 console.log로 출력
- 가져온 댓글을 객체로 변환한 후 서버로 전송
   - 서버로 보낸 때 json으로 전송

4. 컨트롤러
- 화면에서 보낸 게시글 번호를 가져옴
- 화면에서 보낸 댓글 내용을 가져옴
- 로그인한 사용자 정보 가져옴
- 서비스에게 게시글번호와 댓글내용, 사용자정보를 주면서 댓글을 등록
하고 결과를 문자열로 가져오라고 요청
- 가져온 결과를 화면에 전송

5. 서비스 
- 사용자가 로그인 안했으면 "로그인이 필요한 서비스입니다."라고 반환
- 다오에게 게시글 번호, 댓글 내용, 사용자아이디를 주면서 게시글을 등
록하라고 요청후 등록 여부를 알려달라고 요청
- 등록했으면 "댓글을 등록했습니다."라고 반환하고
- 못했으면 댓글을 등록하지 못했습니다라고 반환

6. 다오/매퍼
- 게시글 번호, 댓글 내용, 작성자정보를 이용하여 댓글을 등록하는 쿼리 작성


# 댓글 삭제 기능
1. 링크추가
- 댓글 삭제 버튼을 클릭하면 함수 호출하는데 댓글 번호를 넘겨줌
- 함수를 추가
  - fetch를 이용하여 서버와 연결
     - url : /api/v1/posts/게시글번호/comments/댓글번호
     - method

4. 컨트롤러
- 화면에서 보낸 댓글 번호를 가져옴
- 로그인한 사용자 정보를 가져옴
- 서비스에게 댓글 번호와 로그인한 사용자 정보를 주면서 댓글을 삭제
하고 결과를 알려달라고 요청
- 결과를 화면에 전달

5. 서비스
- 사용자가 로그인되어 있지 않으면 "로그인이 필요한 서비스입니다" 반환
- 댓글 작성자 확인
  - 다오에게 댓글번호 주면서 댓글 정보 가져오라고 요청
  - 가져온 댓글 정보가 없으면 "잘못된 댓글입니다."를 반환
  - 댓글작성자와 사용자아이디가 다르면 "작성자가 아닙니다"를 반환
- 다오에게 댓글 번호를 주면서 삭제하고 결과를 알려달라고 요청
- 삭제했으면 "댓글을 삭제했습니다"를 반환
- 못했으면 "댓글을 삭제하지 못했습니다"를 반환

6. 다오/매퍼
- 댓글번호를 이용하여 댓글 정보를 가져오는 쿼리 작성. resultMap활용
- 댓글 번호를 이용하여 co_del을 Y로 수정하는 쿼리 작성

7. 화면
- 삭제 요청 후, 댓글 목록 새로고침
- 삭제된 댓글은 삭제된 댓글입니다로 화면 구성


#대댓글 기능 구현

1. 대댓글 클릭했을때 대댓글 입력창을 화면에서 추가
1.1 대댓글 클릭 이벤트를 등록
   - alert("test") 뜨도록 구현
1.2 이벤트를 구현
   - 클릭한 대댓글 버튼을 가져옴
   - HTML코드로 된 대댓글입력창을 문자열로 구성
   - 원하는 위치에 HTML코드로 된 문자열을 추가

2. 대댓글 등록버튼을 클릭했을떄 대댓글이 등록
   - 댓글번호를 가져옴
   - 기존 댓글응 등록할 떄 보냈던 정보에 참조 댓글번호를 추가해서 전송

수정 기능 구현
1. 수정버튼을 클릭하면 입력창을 추가
   1.1 입력창을 추가
   - 기존 댓글 내용이 들어가있어야 함
   1.2 대댓글,수정,삭제버튼을 감춤
   - 부트스트랩에서 제공하는 d-none클래스를 활용
   1.3 기존 댓글 내용을 감춤

2. 수정 내용을 입력하고 수정 버튼을 클릭하면
   2.0 수정버튼 클릭시 form태그의 submit 이벤트를 등록
      - 댓글 등록에서 등록 버튼 클릭하면 form태그 submit하는 코드 참고
      - event.preventDefault를 추가
   2.1 댓글번호와 수정된 내용을 가져옴
   2.2 정보를 서버에 전송
   - uri : /api/v1/posts/게시글번호/comments/댓글번호
   - method : put

1. 링크추가
- url : /api/v1/posts/게시글번호/comments/댓글번호
- method : put
- fetch를 이용하여 전송

2. 컨트롤러 메서드 추가
- url : /api/v1/posts/게시글번호/comments/댓글번호
- method : put
- 화면으로 보낼 결과는 문자열

3. 화면구성
- 서버가 보낸 문자열을 alert로 확인
- 화면에서 서버로 수정된 댓글 내용을 전송
  - json으로

4. 컨트롤러
- 화면에서 보낸 정보를 가져옴
  - 댓글번호
  - 수정된 댓글 내용
- 로그인한 사용자 정보를 가져옴
- 서비스에게 댓글번호, 수정된 댓글내용, 사용자 정보를 주면서 수정하고
결과를 알려달라고 요청
- 가져온 결과를 화면에 전달

5. 서비스
- 내용이 비었는지 체크하여 비었으면 댓글을 입력하세요를 반환
- 로그인 안했으면 로그인이 필요한 서비스입니다를 반환
- 작성자가 아니면 작성자가 아닙니다를 반환
- 다오에게 댓글번호와 내용을 주면서 수정하라고 요청하고 결과를 가져옴
- 수정햇으면 댓글을 수정했습니다를 반환
- 안했으면 댓글을 수정하지 못했습니다를 반환

6. 다오/매퍼
- 댓글 번호를 이용하여 댓글을 수정하는 쿼리 작성

7. 화면
- 없음

추천 기능을 위한 Controller, Service, DAO, Mapper를 추가 후 의존성
주입
1. LikeController
2. LikeService
3. LikeDAO
4. LikeMapper
추가 후 생성자를 이용한 의존성 주입





