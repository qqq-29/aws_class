브라우저-浏览器
리프레쉬-刷新令牌
jwt:
-로그인
1. 화면 : 정상 로그인 시도
2. 서버 : 토큰 발급(access, refresh)
3. 화면 : 토큰을 저장
   - access: 로컬 스토리지에 -本地存储
(访问令牌通常保存在浏览器的本地存储中。)
(Access Token은 보통 브라우저의 로컬 스토리지에 저장된다.)
   - refresh: 쿠키에
4. 화면 : 회원 정보를 요청
5. 서버 : 회원 정보를 보냄
6. 화면 : 회원 정보를 받아서 context에 저장
   - setUser를 이용해서 회원 정보를 변경 후 렌더링

-로그아웃
1. 화면 : 로그아웃 요청
2. 서버 : 리프레쉬 토큰 제거 (쿠키에서)
3. 화면 : access 토큰제거 (로컬 스토리지에서)
4. 화면 : 회원정보를 null로 저장
   - setUser를 이용해서

-이후 요청 URL(토큰이 유효할때)
1. 화면 : 서버로 무언가를 요청
   - authFetch에서 토큰 정보를 헤더에 실어 전송
2. 서버 : 
   - 필터 
      - 토큰이 있으면 인증 처리, 없으면 인증 처리 안함
      - 리프레쉬 토큰은 인증처리 안함
   - 컨트롤러에서 할일을 하고 화면에 필요한 정보를 전달
3. 화면 : 서버에서 보낸 데이터를 이용하여 원하는 작업 실행

-이후 요청 URL(토큰이 유효하지 않을 때)
1. 화면 : 서버로 무언가를 요청
   - authFetch에서 토큰 정보를 헤더에 실어 전송
2. 서버 : 
   - 필터 
      - 토큰이 유효하지 않아 인증 처리 안함
        => 상태 401을 보냄
3. 화면 : 서버로 리프레쉬 토큰을 이용해서 새 토큰 발급을 요청
4. 서버 : 유효한 리프레쉬 토큰을 이용해서 새 토큰 발급
5. 화면 : 새 토큰을 로컬 스토리지에 저장
6. 화면 : 1번을 다시 시도





JWT 登录整体流程（简要版）

1用户登录

用户在浏览器中输入账号和密码

浏览器向服务器发送登录请求

2️服务器验证并发放令牌

服务器验证用户信息

登录成功后发放两个令牌：

访问令牌（Access Token）

刷新令牌（Refresh Token）

3️令牌保存

访问令牌：保存在浏览器的 本地存储（Local Storage） 中

刷新令牌：保存在 HttpOnly Cookie 中（更安全）

4️访问接口

浏览器在请求 API 时

在请求头中携带访问令牌：

Authorization: Bearer AccessToken


5️访问令牌过期

如果访问令牌过期，服务器返回 401

浏览器使用刷新令牌向服务器请求新的访问令牌

6️重新获取访问令牌

服务器验证刷新令牌

验证成功 → 返回新的访问令牌

浏览器更新本地存储中的访问令牌

7️继续访问

浏览器使用新的访问令牌

重新发送原来的请求

用户无需重新登录

一句话总结

JWT 登录就是：
浏览器使用访问令牌访问接口，
访问令牌过期时，用刷新令牌自动获取新的令牌。
